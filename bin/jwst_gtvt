usage = """

Database utility scripts.

Usage:
  jwst_gtvt <ra> <dec> [--instrument=<inst>]

Arguments:
  <ra>    Right ascension of target to observe with JWST.
  <dec>   Declination of target to observe with JWST.

Options:
  [--instrument]      JWST instrument to plot individually
  -h --help         Show this screen.
  --version         Show version.
"""

from jwst_gtvt.constants import D2R
from jwst_gtvt.display_results import display_results
from docopt import docopt
from jwst_gtvt.jwst_tvt import Ephemeris
from jwst_gtvt.plotting import plot_visibility


def main(args):
    eph = Ephemeris()
    if ':' in args['<ra>']:
      ra = eph.convert_ddmmss_to_float(args['<ra>']) * 15.
      dec = eph.convert_ddmmss_to_float(args['<dec>'])
    else:
      ra, dec = float(args['<ra>']), float(args['<dec>'])

    eph.get_fixed_target_positions(ra, dec)
    display_results(eph)
    plot_visibility(eph, args['--instrument'])

if __name__ == "__main__":
    args = docopt(usage, version='0.6.2')
    main(args)
